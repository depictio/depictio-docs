
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://depictio.example.com/modularity/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../get_started/">
      
      
      <link rel="icon" href="../images/logo/logo_icon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Modularity - Depictio Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#modularity" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Depictio Documentation" class="md-header__button md-logo" aria-label="Depictio Documentation" data-md-component="logo">
      
  <img src="../images/logo/logo_icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Depictio Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Modularity
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Depictio Documentation" class="md-nav__button md-logo" aria-label="Depictio Documentation" data-md-component="logo">
      
  <img src="../images/logo/logo_icon.png" alt="logo">

    </a>
    Depictio Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Modularity
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Modularity
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-object-model-and-database-design" class="md-nav__link">
    <span class="md-ellipsis">
      General object model and database design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="General object model and database design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workflow-object-design" class="md-nav__link">
    <span class="md-ellipsis">
      Workflow Object Design
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Code architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-structure" class="md-nav__link">
    <span class="md-ellipsis">
      API structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashboard-components" class="md-nav__link">
    <span class="md-ellipsis">
      Dashboard components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dashboard components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#component-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Component Structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generic-components-data-collection-table" class="md-nav__link">
    <span class="md-ellipsis">
      Generic components (Data collection Table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specific-components" class="md-nav__link">
    <span class="md-ellipsis">
      Specific components
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-ui" class="md-nav__link">
    <span class="md-ellipsis">
      Web UI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../get_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../use_cases.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Use cases
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-object-model-and-database-design" class="md-nav__link">
    <span class="md-ellipsis">
      General object model and database design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="General object model and database design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#workflow-object-design" class="md-nav__link">
    <span class="md-ellipsis">
      Workflow Object Design
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Code architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-structure" class="md-nav__link">
    <span class="md-ellipsis">
      API structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dashboard-components" class="md-nav__link">
    <span class="md-ellipsis">
      Dashboard components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dashboard components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#component-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Component Structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generic-components-data-collection-table" class="md-nav__link">
    <span class="md-ellipsis">
      Generic components (Data collection Table)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specific-components" class="md-nav__link">
    <span class="md-ellipsis">
      Specific components
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-ui" class="md-nav__link">
    <span class="md-ellipsis">
      Web UI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="modularity">Modularity</h1>
<p>Depictio code is designed with a modular architecture, allowing for easy integration of new features and functionalities. The frontend and backend components are decoupled, enabling independent development and deployment of each module. The platform is built to be scalable and adaptable to various needs, with a focus on user-friendly interfaces and interactive data visualization tools. </p>
<h2 id="general-object-model-and-database-design">General object model and database design</h2>
<p>Depictio object model was designed to reflect production-oriented workflows. The architecture is built to ensure a clear separation of concerns, with distinct layers for workflows, workflow run configurations, runs, files generated, and data collections. This modular approach is reflected in both the database schema and the API structure.</p>
<h3 id="workflow-object-design">Workflow Object Design</h3>
<ul>
<li><strong>Workflow</strong>: The top-level entity that encapsulates that represents a production-oriented pipeline/workflow. </li>
<li><strong>Run Configurations</strong>: These define the parameters and settings that were used to run a workflow. </li>
<li><strong>Runs</strong>: Instances of a production workflow executed using a specific run configuration. Each run generates output files, that are structured the same way across runs. These files can then be associated into data collections.</li>
<li><strong>Files</strong>: Artifacts produced by each run. These can be intermediate or final results of the workflow.</li>
<li><strong>Data Collections</strong>: Aggregated data from files following the same structure.</li>
</ul>
<p>The following diagram illustrates the relationships between different entities in Depictio:</p>
<p><img src="../images/schema.png" width="600"></p>
<h2 id="code-architecture">Code architecture</h2>
<p>The code organisation clearly separates each of the frontend components and the API endpoints, making it easy to understand and extend the platform. </p>
<p><img src="../image-1.png" alt="alt text" width="600"></p>
<h3 id="api-structure">API structure</h3>
<p>The API is structured to mirror the object design specified above, with each major component of the workflow having its own set of endpoints and models. The organization within <code>depictio/api/v1/endpoints</code> is as follows:</p>
<ul>
<li><strong>dashboards_endpoints</strong>: Manages endpoints related to dashboards.</li>
<li><strong>datacollections_endpoints</strong>: Handles endpoints for data collections, mapping closely to the Data Collection objects in the design.</li>
<li><strong>deltatables_endpoints</strong>: Provides endpoints for delta tables, which are specific types of data collections with versioning.</li>
<li><strong>files_endpoints</strong>: Manages file-related endpoints, directly corresponding to the File objects.</li>
<li><strong>jbrowse_endpoints</strong>: Contains endpoints for jbrowse-specific functionalities, likely related to genomic data visualization.</li>
<li><strong>user_endpoints</strong>: Manages user authentication and authorization, including models and routes for user management.</li>
<li><strong>utils_endpoints</strong>: Provides utility endpoints, typically for internal or auxiliary operations.</li>
<li><strong>workflow_endpoints</strong>: Focuses on managing workflows, run configurations, and runs, reflecting the core of the workflow architecture.</li>
</ul>
<p>Each endpoint is defined in a separate subfolder, where the <code>routes.py</code> file contains the API routes and the <code>models.py</code> file contains the object models associated.</p>
<p><img src="../image-2.png" alt="alt text" width="600"></p>
<h3 id="dashboard-components">Dashboard components</h3>
<p>The frontend components in Depictio are organized in the depictio/dash/modules folder, with each component defined in a separate subfolder. This modular design ensures easy integration and maintainability.</p>
<h4 id="component-structure">Component Structure</h4>
<p>Each component folder typically contains:</p>
<ul>
<li><strong>frontend.py</strong>: Implements Dash callback functions.</li>
<li><strong>utils.py</strong>: Contains helper functions for rendering and state management.</li>
</ul>
<p>Each of the frontend components is designed to be modular and can be easily integrated into the dashboard. Each component is defined in a separate folder, containing the component logic and styling. The <code>frontend.py</code> file contains the dash callback functions implementation and the <code>utils.py</code> file contains the helpers functions used by the component, allowing the component to be re-rendered in different scenarios (first design, reload/restore, refresh after data update).</p>
<p><img src="../image-3.png" alt="alt text" width="600"></p>
<h3 id="generic-components-data-collection-table">Generic components (Data collection Table)</h3>
<p>There are currently 4 main components supported to build your dashboard:</p>
<ul>
<li>Figures: Bar, Line, Scatter, Box and Histogram plots.</li>
<li>Metrics cards: Cards displaying metrics values.</li>
<li>Interactive components: (slider, dropdown, input text, etc.)</li>
<li>Tables: Interactive tables with sorting, filtering and searching functionalities.</li>
</ul>
<h3 id="specific-components">Specific components</h3>
<ul>
<li>JBrowse: Genome browser to visualize genomic data.</li>
<li>Graphs: Network graphs to visualize interactions between entities.</li>
<li>Geomap: Geographical map.</li>
</ul>
<hr />
<h3 id="web-ui">Web UI</h3>
<p>To add a new component to the dashboard, you simply need to click on the "Add new component" button of your dashboard. This will open a 3-levels modal where you will be able to select:</p>
<ol>
<li>
<p>The data source: it corresponds to the bioinformatics workflow and the data collection you want to be based on to build your new component.</p>
</li>
<li>
<p>The component type: it corresponds to the type of component (listed below) you want to add to your dashboard.</p>
</li>
<li>
<p>The component configuration: it corresponds to the configuration of the component you want to add to your dashboard.</p>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.select", "content.code.annotate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>